<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Йониум — Империя Тьмы</title>
    <link rel="stylesheet" href="style.css">

    <!-- Фавикон (чтобы не было 404) -->
    <link rel="icon" href="assets/icons/icon_castle.png">
</head>

<body>

<!-- ===================== HEADER ===================== -->
<div id="topBar">
    <h1>ЙОНИУМ</h1>
    <h2 id="yearLabel">Год: 1450</h2>
</div>

<!-- ===================== MAIN LAYOUT ===================== -->
<div id="layout">

    <!-- ===== LEFT: MINI MAP ===== -->
    <div id="leftPanel" class="panel">
        <h3>Поселение</h3>
        <div id="mapGrid"></div>
    </div>

    <!-- ===== CENTER: BUILDINGS ===== -->
    <div id="centerPanel" class="panel">
        <h3>Строительство</h3>

        <button onclick="openBuildPopup('farm')">
            <img src="assets/icons/icon_farm.png"> Построить ферму
        </button>

        <button onclick="openBuildPopup('mine')">
            <img src="assets/icons/icon_mine.png"> Построить шахту
        </button>

        <button onclick="openBuildPopup('market')">
            <img src="assets/icons/icon_market.png"> Построить рынок
        </button>

        <button onclick="openBuildPopup('forge')">
            <img src="assets/icons/icon_forge.png"> Построить кузницу
        </button>

        <button onclick="upgradeCastle()">
            <img src="assets/icons/icon_castle.png"> Улучшить замок
        </button>

        <hr>

        <button onclick="craftWeapon()">Ковать оружие</button>
        <button onclick="hireSoldier()">Нанять солдата</button>
    </div>

    <!-- ===== RIGHT: STATS ===== -->
    <div id="rightPanel" class="panel">
        <h3>Статистика</h3>

        <div class="statRow"><span>Жители:</span><span id="pop"></span></div>
        <div class="statRow"><span>Еда:</span><span id="food"></span></div>
        <div class="statRow"><span>Золото:</span><span id="gold"></span></div>
        <div class="statRow"><span>Железо:</span><span id="iron"></span></div>
        <div class="statRow"><span>Оружие:</span><span id="weapons"></span></div>
        <div class="statRow"><span>Солдаты:</span><span id="army"></span></div>
        <div class="statRow"><span>Популярность:</span><span id="popularity"></span></div>
        <div class="statRow"><span>Замок:</span><span id="castle"></span></div>
        <div class="statRow"><span>Титул:</span><span id="rank"></span></div>

        <hr>

        <h3>Налоги и пайки</h3>

        <div class="inputRow">
            <label>Налоги (%):</label>
            <input id="taxRate" type="number" min="0" max="100" value="30">
        </div>

        <div class="inputRow">
            <label>Еда на человека:</label>
            <input id="foodRate" type="number" min="0" max="10" value="3">
        </div>

        <hr>

        <h3>Торговля</h3>
        <button onclick="sellFood()">Продать еду</button>
        <button onclick="buyFood()">Купить еду</button>
        <button onclick="sellIron()">Продать железо</button>
        <button onclick="buyIron()">Купить железо</button>
        <button onclick="sellWeapons()">Продать оружие</button>
        <button onclick="buyWeapons()">Купить оружие</button>

    </div>

</div>

<!-- ===================== NEXT YEAR BUTTON ===================== -->
<div id="yearButtonWrap">
    <button id="endTurnButton" onclick="endTurn()">Следующий год</button>
</div>

<!-- ===================== ADVISOR ===================== -->
<div id="advisorPanel" class="panel" style="
    position: fixed;
    bottom: 10px;
    right: 10px;
    width: 260px;
    z-index: 50;
">
    <h3>Советник</h3>
    <pre id="advisor">Здесь будут подсказки советника…</pre>
</div>

<!-- ===================== BUILD POPUP ===================== -->
<div id="buildPopup" class="popup hidden">
    <div class="popupBox">
        <h3 id="buildTitle"></h3>

        <img id="buildIcon" class="buildIcon">

        <p id="buildDesc"></p>

        <label>Количество:
            <input id="buildAmount" type="number" min="1" value="1">
        </label>

        <button onclick="confirmBuild()">Построить</button>
        <button onclick="closeBuildPopup()">Отмена</button>
    </div>
</div>

<!-- ===================== YEAR REPORT POPUP ===================== -->
<div id="reportPanel" class="popup hidden">
    <div id="reportBox" class="popupBox">
        <h3>Отчёт за год</h3>
        <pre id="reportText"></pre>
        <button onclick="closeReport()">Закрыть</button>
    </div>
</div>

<script src="game.js"></script>

</body>
</html>
